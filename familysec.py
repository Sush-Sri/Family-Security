import cv2  print(cv2.__version__) import pyrebase config = { 'apiKey': "AIzaSyB577ujfKqZZJuTIW-SaaqggWdGQfZC3go", 'authDomain': "project-323943198432", 'databaseURL': "https://family-security-50c22.firebaseio.com/family_security", 'projectId': "family-security-50c22", 'storageBucket': "family-security-50c22", }firebase = pyrebase.initialize_app(config) db = firebase.database() cascade_src = 'C:\\Users\\sush1\\Downloads\\number_of_car_detection_harr_cascade- master\\cars.xml'  video_src = 'C:\\Users\\sush1\\Downloads\\number_of_car_detection_harr_cascade- master\\video2.avi' font = cv2.FONT_HERSHEY_SIMPLEX cap = cv2.VideoCapture(video_src) car_cascade = cv2.CascadeClassifier(cascade_src) total_cars = 0 flag = 19 a = -1 while True: flag += 1 ret, img = cap.read() if (type(img) == type(None)): break  gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)  cars = car_cascade.detectMultiScale(gray, 1.1, 1) 
for (x, y, w, h) in cars: cv2.rectangle(img, (x, y), (x + w, y + h), (0, 0, 255), 2) cv2.line(img, (0, 80), (300, 80), (255, 0, 0), 2) center_x = (x + (x + w)) // 2 center_y = (y + (y + h)) // 2 cv2.circle(img, (center_x, center_y), 2, (255, 0, 0), -1) if center_y == 80: total_cars += 1 cv2.putText(img, str(total_cars), (0, 50), font, 2, (0, 0, 255), 3, cv2.LINE_AA) cv2.imshow('video', img) if cv2.waitKey(33) == 27: break if(total_cars==0): speed = 0 print("NO Car is there around you ") elif(1<=total_cars<=10): speed = 60 print("Maintain your Speed 60 to 70 AND Drive Safely!") elif(11<=total_cars<=20): speed = 50 print("Maintain your Speed between 50 to 60 AND Drive Safely!") elif(21<=total_cars<=30): speed = 30 print("Maintain your Speed 30 AND Drive Safely!") elif(31<=total_cars<=40): speed = 20 print("Maintain your Speed 20 AND Drive Safely!") else: speed = 40 print("Maintain your Speed According to the Traffic,Maintain a particular distance with other vehicles AND Drive Safely!") print(total_cars) if total_cars != a: db.child('total_cars').set(str(total_cars)) db.child('speed').set(str(speed)) a = total_cars if cv2.waitKey(33) == 27: break 11 DEPT.OF CEA,GLAU MATHURA
Family Security cv2.destroyAllWindows()
